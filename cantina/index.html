<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Fiados Cantina</title>
</head>

<body>
    <header>
        <h1>Registro de pedidos pagamento mensal</h1>
    </header>
    <main>
        <nav>
            <button onclick="window.location.href='./index.html'">Pedidos</button>
            <button onclick="window.location.href='./clientes.html'">Clientes</button>
            <button onclick="window.location.href='./produtos.html'">Produtos</button>
        </nav>
        <section>
            <table id="pedidos">
                <thead>
                    <th>Id</th>
                    <th>DataPedido</th>
                    <th>IdCliente</th>
                    <th>IdProduto</th>
                    <th>Quantidade</th>
                    <th>DataPagamento</th>
                </thead>
                <tbody></tbody>
            </table>
        </section>
    </main>
    <footer>
        <h2>By #welllifabio</h2>
        <p>Projeto para fins pedagógicos de análise de dados</p>
    </footer>
</body>
<script>
    // const pedidos = [];
    // for (i = 0; i < 200; i++) {
    //     pedidos.push({
    //         id: i + 1,
    //         dataPedido: new Date(Date.now() - (200 - i) * 24 * 60 * 60 * 1000).toLocaleDateString(),
    //         idCliente: i < 160 ? Math.floor(Math.random() * 8) + 1 : Math.floor(Math.random() * 5) + 1,
    //         idProduto: i < 160 ? Math.floor(Math.random() * 11) + 1: Math.floor(Math.random() * 8) + 1 ,
    //         quantidade: Math.floor(Math.random() * 5) + 1,
    //         dataPagamento: i < 160 ? new Date(Date.now() - (200 - i) * 24 * 60 * 60 * 1000 + Math.floor(Math.random() * 30) * 24 * 60 * 60 * 1000).toLocaleDateString() : "Pendente"
    //     });
    // }
    const uri = './dados/pedidos.json';
    fetch(uri)
        .then(response => response.json())
        .then(pedidos => {
            const tbody = document.querySelector('tbody');
            pedidos.forEach(pedido => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                        <td data-label = 'Id'>${pedido.id}</td>
                        <td data-label = 'Data do Pedido'>${pedido.dataPedido}</td>
                        <td data-label = 'Id do Cliente'>${pedido.idCliente}</td>
                        <td data-label = 'Id do Produto'>${pedido.idProduto}</td>
                        <td data-label = 'Quantidade'>${pedido.quantidade}</td>
                        <td data-label = 'Data do Pagamento'>${pedido.dataPagamento}</td>
                    `;
                tbody.appendChild(tr);
            })
        })
        .catch(error => console.error('Erro ao carregar os pedidos:', error));
</script>

</html>